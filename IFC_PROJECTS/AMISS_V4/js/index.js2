function selectlang() { var a = localStorage.getItem("lang"), c = function (a) { $("[tkey]").each(function (b) { var c = a[$(this).attr("tkey")]; $(this).html(c) }) }; $.getJSON("lang/" + a + ".json", c) } function loadchecklog_master() { try { var a = localStorage.getItem("userinfo"); if (null == a || a == [] || void 0 == a) return void $(location).attr("href", "login.html"); var b = JSON.parse(localStorage.getItem("userinfo")); if (null == b.manhanvien || b.manhanvien == [] || void 0 == b.manhanvien) return void $(location).attr("href", "login.html") } catch (a) { console.log(a) } } function menuClick(a) { var b = "modules/" + a, c = localStorage.getItem("breadcumb"), d = JSON.parse(localStorage.getItem("mod")); if (c != a && localStorage.setItem("tab", ""), c = a, $.inArray(a, d) == -1) d.push(a); else { var e = d.indexOf(a); e >= 0 && d.splice(e, 1), d.push(a) } 11 == d.length && d.shift(), createTagHome(d), localStorage.setItem("mod", JSON.stringify(d)), localStorage.setItem("breadcumb", c), loadModulesToMaster(b + "/index.html", b + "/init.css", b + "/init.js", ".content", !0) } function createTagHome(a) { $("#curentPage").empty(); var c = (localStorage.getItem("breadcumb"), ""); $.each(a, function (b, d) { b < a.length && (c += b == a.length - 1 ? '<a href = "#" class = "active" onClick="menuClick(\'' + d + '\')"><span tkey="' + d + '"></span></a>' : '<a href = "#" onClick="menuClick(\'' + d + '\')"><span tkey="' + d + '"></span></a>') }), $("#curentPage").append(c) } function replaceTag(a) { switch (a) { case "tsvh_tab": return "TSVH"; case "thongketrangthai_tab": return "Trạng thái kết nối"; case "thongtindiemdo_tab": return "Thông tin điểm đo"; case "danhsachsoghi": return "DS Sổ ghi"; case "danhsachnguoidung": return "DS Người dùng"; case "quanlymenu": return "QL Menu"; case "phanquyen": return "Phân quyền"; case "quanlynguoidung": return "QL Người dùng"; case "thongkelapdat": return "Thống kê lắp đặt"; case "xuatthongtindiemdo": return "Xuất thông tin điểm đo"; case "tk_chitietdangnhap": return "Chi tiết đăng nhập"; case "tk_dangnhap": return "Thống kê đăng nhập"; case "tk_lognguoidung": return "Thống kê đăng nhập"; case "nhatkyvanhanh": return "Nhật ký vận hành"; case "canhbaovanhanh_tab": return "Cảnh báo vận hành"; case "sukiencongto_tab": return "Sự kiện công tơ"; case "thietlap_cb_tab": return "Thiết lập cảnh báo"; case "quanlydanhmuc_tab": return "QL danh mục"; case "cs_xemchisodinhky": return "Chỉ số định kỳ"; case "home": return "Trang chủ"; case "tkdn_tab": return "Thống kê đăng nhập" } } function menuClickTab(a, b) { localStorage.setItem("tab", a), localStorage.setItem("para", b), set_active() } function Thongtintaikhoan() { try { var a = JSON.parse(localStorage.getItem("userinfo")).userid, b = { namesql: "PKG_DANGNHAP.LSTTHONGTINTAIKHOAN", callback: "f_result_loadthongtin", connstr: "ConnectOracle233" }, c = { v_ID: a }; ExecuteServiceSyns(b, c) } catch (a) { console.log(a) } } function f_result_loadthongtin(a, b, c) { try { var d = c.data; if ("" == d || 0 == d.length || "[]" == d || void 0 == d) return; $("#txt_tennguoidung").html(setnull(d[0].tennguoidung)), $("#txt_email").html(setnull(d[0].email)), $("#txt_sodienthoai").html(setnull(d[0].sodienthoai)) } catch (a) { console.log(a) } } function getMenuUser() { try { var a = JSON.parse(localStorage.getItem("userinfo")).tendangnhap, b = { namesql: "PKG_PHANQUYEN.GET_MENU", callback: "f_result_menuuser", connstr: "ConnectOracle233" }, c = { v_tendangnhap: a }; ExecuteServiceSyns(b, c) } catch (a) { console.log(a) } } function f_result_menuuser(a, b, c) { try { var d = c.data; 0 == d.length ? (menuClick("quanlymenu"), $(".content-tree.hidetree").hide()) : genarateMenu(d) } catch (a) { console.log(a) } } function getMenuUserAmiss() { try { var a = JSON.parse(localStorage.getItem("userinfo")).tendangnhap, b = { namesql: "PKG_PHANQUYEN.GET_MENU", callback: "f_result_menuuserAmiss", connstr: "ConnectOracle233" }, c = { v_tendangnhap: a }; ExecuteServiceSyns(b, c) } catch (a) { console.log(a) } } function f_result_menuuserAmiss(a, b, c) { try { var d = c.data; 0 == d.length ? (menuClick("quanlymenu"), $(".content-tree.hidetree").hide()) : genarateMenuAmiss(d) } catch (a) { console.log(a) } } function replace0_0(a) { return "0.00" == a || null == a || "" == a ? " - " : a } function initformelement() { resize(), $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({ checkboxClass: "icheckbox_flat-blue", radioClass: "iradio_flat-blue" }), $(".datepicker").each(function () { var a = { todayHighlight: !0, autoclose: !0, format: "dd/mm/yyyy" }, b = $(this).attr("datepicker_op"); if ("undefined" != typeof b && b !== !1) { var c = $(this).attr("datepicker_op"), d = JSON.parse(c.replace(/'/g, '"')); $.each(d, function (b, c) { a[b] = c }) } $(this).datepicker(a) }), $(".select2").select2(), $(".timepicker").timepicker({ showInputs: !1 }), $(".filterable .btn-filter").click(function () { var a = $(this).parents(".filterable"), b = a.find(".filters input"), c = a.find(".table tbody"); 1 == b.prop("disabled") ? (b.prop("disabled", !1), b.first().focus()) : (b.val("").prop("disabled", !0), c.find(".no-result").remove(), c.find("tr").show()) }), $(".filterable .filters input").keyup(function (a) { var b = a.keyCode || a.which; if ("9" != b) { var c = $(this), d = c.val().toLowerCase(), e = c.parents(".filterable"), f = e.find(".filters th").index(c.parents("th")), g = e.find(".table"), h = g.find("tbody tr"), i = h.filter(function () { var a = $(this).find("td").eq(f).text().toLowerCase(); return a.indexOf(d) === -1 }); g.find("tbody .no-result").remove(), h.show(), i.hide(), i.length === h.length && g.find("tbody").prepend($('<tr class="no-result text-center"><td colspan="' + g.find(".filters th").length + '">Không có kết quả</td></tr>')) } }), $(".multi_select").multiselect({ includeSelectAllOption: !0, selectAllValue: 0, enableFiltering: !0, filterBehavior: "both" }) } function replacePha(a) { return "1" == a ? "1 <span tkey='pha'></span>" : "3" == a ? "3 <span tkey='pha-s'></span>" : "31" == a ? "3 <span tkey='pha-s'></span> 1 <span tkey='bieugia'></span>" : void 0 } function genarateMenu(a) { for (var b = JSON.parse(a[0].menu_content), c = '<li class="header" tkey="Chức năng hệ thống"></li>', d = "", e = 0; e < b.length; e++) { var f = b[e].sub; if (f.length > 0) { d += '<li class="treeview"><a href="#"><i class="fa fa-' + b[e].icon + '"></i> <span tkey="' + b[e].mainmenu + '">' + b[e].mainmenu + '</span><span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span></a><ul class="treeview-menu">'; for (var g = 0; g < f.length; g++) d += '<li class=""><a href = "#" onclick="menuClick(\'' + f[g].link + '\')"><i class="fa fa-circle-o"></i> <span tkey="' + f[g].link + '">' + f[g].tenmenu + "</span></a></li>"; d += "</ul></li>" } else d += "</ul>" } $("ul.sidebar-menu").empty(), $("ul.sidebar-menu").append(c + d); var h = $("ul.sidebar-menu li").get(1); $(h).addClass("active"), selectlang() } function genarateMenuAmiss(a) { for (var b = JSON.parse(a[0].menu_content), c = '<li class="header">QUẢN LÝ HỆ THỐNG</li>', d = "", e = 0; e < b.length; e++) { var f = b[e].sub; if (f.length > 0) { d += '<li class="treeview"><a href="#"><i class="fa fa-' + b[e].icon + '"></i> <span>' + b[e].mainmenu + '</span><span class="pull-right-container"><i class="fa fa-angle-left pull-right"></i></span></a><ul class="treeview-menu">'; for (var g = 0; g < f.length; g++) d += '<li class=""><a href = "#" onclick="menuClickAmiss(\'' + f[g].link + '\')"><i class="fa fa-circle-o"></i> ' + f[g].tenmenu + "</a></li>"; d += "</ul></li>" } else d += "</ul>" } $("ul.sidebar-menu").empty(), $("ul.sidebar-menu").append(c + d) } function f_ChuyenTrangLoadLichSuCot(a) { getAllIdMod(); return macot_lichsucot = a, macot_lichsucot } function resize() { var b = ($(window).width(), $(window).height()); $(".content-wrapper").css("max-height", b), $(".wrapper").css("max-height", b), $(".wrapper").css("height", b), $(".content-tree").css("max-height", b - 100), $(".content-tree").css("height", "auto"), $(".content").css("max-height", b - 100), $(".content").css("height", b - 90) } function dec(a) { return $.base64.atob(a, !0) } function enc(a) { return $.base64.btoa(a) } $(document).ready(function () { try { selectlang(), $(".content").scroll(function () { $(this).scrollTop() > 300 ? $(".movetotop").fadeIn() : $(this).scrollTop() <= 300 && $(".movetotop").fadeOut() }), $("body").fadeTo("slow", 1, function () { }), $(".main-content").fadeTo("slow", 1, function () { }), $("#btn_taikhoan").click(function () { Thongtintaikhoan() }), $("#btn_dangxuat").click(function () { localStorage.removeItem("userinfo"), loadchecklog_master() }), "" != localStorage.getItem("breadcumb") && menuClick(localStorage.getItem("breadcumb")), $(".movetotop").click(function () { $(".content").animate({ scrollTop: 0 }, "slow") }), loadContent(), initformelement() } catch (a) { console.log(a) } }), function (a) { $.fn.attr = function () { if (0 === arguments.length) { if (0 === this.length) return null; var b = {}; return $.each(this[0].attributes, function () { this.specified && (b[this.name] = this.value) }), b } return a.apply(this, arguments) } }($.fn.attr);